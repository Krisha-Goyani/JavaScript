<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch: Download progress</title>
</head>

<body>
    <script>
        async function readStream(response) {
    const reader = response.body.getReader();

    while (true) {
        const { done, value } = await reader.read(); // âœ… Now inside an async function

        if (done) {
            break;
        }

        console.log(`Received ${value.length} bytes`);
    }
}

// Example fetch request
async function fetchAndRead() {
    let response = await fetch('https://jsonplaceholder.typicode.com/posts'); // Fetch some data
    await readStream(response); // Call the function to read the stream
}

fetchAndRead(); // Start the process

    </script>
</body>

</html>